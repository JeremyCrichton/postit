<nav class="navbar navbar-expand-lg navbar-light bg-light d-flex justify-content-between">
  <%= link_to "Postit!", root_path, :class => 'navbar-brand' %>
  <ul class="navbar-nav">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Categories
      </a>
      <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
        <% Category.all.each do |category| %>
          <%= link_to category.name, category_path(category), class: "dropdown-item" %>
        <% end %>

        <% if logged_in? %>
          <div class="dropdown-divider"></div>
          <%= link_to "New Category", new_category_path, class: "dropdown-item" %>
        <% end %>
      </div>
    </li>
    <% if logged_in? %>
    <%# User menu %>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink2" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= current_user.username %>
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink2">
          <%= link_to "edit profile", edit_user_path(current_user), class: "dropdown-item" %>
          <%= link_to "view profile", user_path(current_user), class: "dropdown-item" %>
          <%= link_to "log out", logout_path, class: "dropdown-item" %>
        </div>
      </li>
      <li class="ml-2"><%= link_to 'New Post', new_post_path, class: 'btn btn-success btn-small' %></li>
      <li class="ml-2"><%= link_to 'Logout', logout_path, class: 'btn btn-danger btn-small' %></li>
    <% else %>
      <li class="ml-2"><%= link_to 'Login', login_path, class: 'btn btn-small' %></li>
      <li class="ml-2"><%= link_to 'Register', register_path, class: 'btn btn-small' %></li>
    <% end %>
    
  </ul>
</nav>
